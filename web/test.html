<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style>
            :root {
                /* Base settings */
                --transition: 0.3s;
                --radius: 0.3rem;

                /* Color system */
                --color-white: hsl(0, 0%, 100%);
                --color-black: hsl(0, 0%, 20%);
                --color-gray-light: hsl(0, 0%, 96.08%);
                --color-gray: hsl(0, 0%, 80%);
                --color-gray-dark: hsl(0, 0%, 60%);
                --color-blue: hsl(210, 100%, 85.1%);
                --color-blue-light: hsl(211.2, 100%, 95.1%);
                --color-red: hsl(3, 100%, 69%);

                /* Cell properties */
                --cell-size: min(3rem, 9vw);
                --cell-font-size: calc(var(--cell-size) * 0.43);
                --cell-note-font-size: calc(var(--cell-size) * 0.33);
                --cell-bg: var(--color-white);
                --cell-bg-prefilled: hsl(0, 0%, 97%);
                --cell-bg-selected: var(--color-blue);
                --cell-bg-highlight: var(--color-blue-light);
                --cell-bg-incorrect: var(--color-red);
                --cell-border: 1px solid var(--color-gray-dark);
                --cell-border-thick: 0.1rem solid var(--color-black);

                /* Button properties */
                --button-bg: var(--color-white);
                --button-border: 1px solid var(--color-gray);
                --keyboard-btn-size: min(3rem, 10vw);
                --keyboard-font-size: calc(var(--keyboard-btn-size) * 0.4);
            }

            /* Fix 1: Replace the table-based layout with a pure CSS grid */
            #board {
                display: grid;
                grid-template-columns: repeat(9, 1fr);
                grid-template-rows: repeat(9, 1fr);
                border: var(--cell-border-thick);
                aspect-ratio: 1/1;
                width: min(90vw, min(90vh - 150px, 500px));
                height: auto; /* Height will be maintained by aspect-ratio */
                margin: 0 auto;
            }

            /* Remove table structure styling since we're moving to divs */
            #board .cell {
                position: relative;
                aspect-ratio: 1/1;
                border: var(--cell-border);
                background-color: var(--cell-bg);
                cursor: pointer;
                user-select: none;
                transition: background-color var(--transition);
                touch-action: manipulation;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            /* Fix 2: Make sure the grid cells maintain square ratio by using padding-bottom trick as a fallback */
            #board .cell::before {
                content: "";
                display: block;
                padding-bottom: 100%;
                grid-area: 1 / 1 / 2 / 2;
            }

            #board .cell > * {
                grid-area: 1 / 1 / 2 / 2;
            }

            /* Grid lines - update selectors for the new structure */
            #board .cell:nth-child(9n + 1),
            #board .cell:nth-child(9n + 2),
            #board .cell:nth-child(9n + 3),
            #board .cell:nth-child(9n + 4),
            #board .cell:nth-child(9n + 5),
            #board .cell:nth-child(9n + 6),
            #board .cell:nth-child(9n + 7),
            #board .cell:nth-child(9n + 8),
            #board .cell:nth-child(9n + 9) {
                /* Apply existing styling */
            }

            /* Fix 3: Add overall content sizing constraints */
            #board .cell span {
                font-size: var(--cell-font-size);
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                max-width: 90%;
                max-height: 90%;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        </style>
    </head>
    <body>
        <div id="board">
            <div class="cell" data-row="0" data-col="1">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="2">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="3">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="4">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="5">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="6">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="7">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="8">
                <span>5</span>
            </div>
            <div class="cell" data-row="0" data-col="9">
                <span>5</span>
            </div>
            <div class="cell" data-row="1" data-col="1">
                <span>5</span>
            </div>
            <div class="cell" data-row="1" data-col="2">
                <span>5</span>
            </div>
            <div class="cell" data-row="1" data-col="3">
                <span>5</span>
            </div>
            <div class="cell" data-row="1" data-col="4">
                <span>5</span>
            </div>
        </div>
    </body>
</html>
